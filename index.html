<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Select a date range:</h1>
<input class="dc_date_range_picker from_date" data-id="1">
<input class="dc_date_range_picker to_date" data-id="1">
<script>

    var DC = {};
    (function () {

        DC.DateRangePicker = function () {
            var dialog;
            var panel;

            var choiceList = ["day", "week", "Month", "Quarter"];
            var ranges = {"day": 1, "week": 7, "Month": 30, "Quarter": 90};

            function create(tagName, content, attributes) {

                var element = document.createElement(tagName);
                element.innerHTML = content ? content : "";

                if (attributes) {
                    var keys = Object.keys(attributes);

                    for (var i = 0; i < keys.length; i++) {
                        var key = keys[i];
                        element[key] = attributes[key];
                    }

                }

                return element;

            }


            function Button(caption, handler, attributes) {
                var button = create("button", caption, attributes);
                button.value = caption.toString().toLowerCase().replace(" ", "_");
                button.addEventListener("click", handler);
                return button;
            }

            function insertAfter(item, button) {
                item.parentElement.insertBefore(button, item.nextSibling);
            }

            function onClickChoice() {
                alert("testing" + this.value);
            }

            function onClickOK() {
                alert("testing OK");
            }


            function getDialog(item) {

                var div = create("div", "Date Range:", {
                    style: "width:480px;height:360px;background-color:white;border:1px solid rgba(64,64,64,0.5);position:absolute;" +
                    "box-shadow: 3px 3px 18px rgba(0,0,0,0.25);"
                    + "left:" + (item.offsetLeft + item.offsetWidth) + "px;"
                    + "top:" + item.offsetTop + "px;"
                });

                function close() {
                    div.remove();
                }

                div.appendChild(Button("X", close, {style: "position:absolute;top:-1em;right:-1em;"}));

                div.appendChild(getChoices(choiceList));

                div.appendChild(getActions([
                    Button("OK", onClickOK),
                    Button("Cancel", close)
                ]));

                return div;
            }


            function getActions(list) {

                var actions = create("div", "",
                        {
                            style: "position:absolute;" + "bottom:0;right:0"
                        }
                );

                for (var i = 0; i < list.length; i++) {
                    actions.appendChild(list[i]);
                }

                return actions;
            }

            function getChoices(list) {

                var choices = create("div", "",
                        {
                            style: "position:absolute;" + "left:0;top:0;"
                        }
                );

                function onClickChoice() {
                    alert(this.class);
                }

                for (var i = 0; i < list.length; i++) {
                    var button = Button(list[i], onClickChoice, {class: "choice"});
                    choices.appendChild(button);
                }

                return choices;
            }

            function apply(item) {

                function onClickItem() {

                    var div = getDialog(item)


                    insertAfter(this, div);
                }

                insertAfter(item, Button("...", onClickItem));
            }


            function applyAll(selector) {

                var list = document.querySelectorAll(selector);

                for (var i = 0; i < list.length; i++) {
                    var item = list[i];
                    apply(item);
                }

            }


            return {
                apply: apply,
                applyAll: applyAll
            }

        }();
    }());

    DC.DateRangePicker.applyAll("input.dc_date_range_picker");

</script>
</body>
</html>